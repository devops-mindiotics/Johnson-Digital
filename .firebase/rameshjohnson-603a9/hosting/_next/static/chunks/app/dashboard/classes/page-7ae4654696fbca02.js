(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4078],{17759:(e,s,t)=>{"use strict";t.d(s,{C5:()=>j,MJ:()=>p,eI:()=>h,lR:()=>x,lV:()=>d,zB:()=>u});var a=t(95155),n=t(12115),l=t(66634),r=t(62177),i=t(59434),o=t(85057);let d=r.Op,c=n.createContext({}),u=e=>{let{...s}=e;return(0,a.jsx)(c.Provider,{value:{name:s.name},children:(0,a.jsx)(r.xI,{...s})})},m=()=>{let e=n.useContext(c),s=n.useContext(f),{getFieldState:t,formState:a}=(0,r.xW)(),l=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=s;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},f=n.createContext({}),h=n.forwardRef((e,s)=>{let{className:t,...l}=e,r=n.useId();return(0,a.jsx)(f.Provider,{value:{id:r},children:(0,a.jsx)("div",{ref:s,className:(0,i.cn)("space-y-2",t),...l})})});h.displayName="FormItem";let x=n.forwardRef((e,s)=>{let{className:t,...n}=e,{error:l,formItemId:r}=m();return(0,a.jsx)(o.Label,{ref:s,className:(0,i.cn)(l&&"text-destructive",t),htmlFor:r,...n})});x.displayName="FormLabel";let p=n.forwardRef((e,s)=>{let{...t}=e,{error:n,formItemId:r,formDescriptionId:i,formMessageId:o}=m();return(0,a.jsx)(l.DX,{ref:s,id:r,"aria-describedby":n?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!n,...t})});p.displayName="FormControl",n.forwardRef((e,s)=>{let{className:t,...n}=e,{formDescriptionId:l}=m();return(0,a.jsx)("p",{ref:s,id:l,className:(0,i.cn)("text-sm text-muted-foreground",t),...n})}).displayName="FormDescription";let j=n.forwardRef((e,s)=>{var t;let{className:n,children:l,...r}=e,{error:o,formMessageId:d}=m(),c=o?String(null!=(t=null==o?void 0:o.message)?t:""):l;return c?(0,a.jsx)("p",{ref:s,id:d,className:(0,i.cn)("text-sm font-medium text-destructive",n),...r,children:c}):null});j.displayName="FormMessage"},22100:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(12115),n=t(27600);let l=()=>{let e=(0,a.useContext)(n.c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},26126:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var a=t(95155);t(12115);var n=t(74466),l=t(59434);let r=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)(r({variant:t}),s),...n})}},27600:(e,s,t)=>{"use strict";t.d(s,{AuthProvider:()=>i,c:()=>r});var a=t(95155),n=t(12115),l=t(35695);let r=(0,n.createContext)(null);function i(e){let{children:s}=e,[t,i]=(0,n.useState)(null),[o,d]=(0,n.useState)(!0),c=(0,l.useRouter)();(0,n.useEffect)(()=>{try{let e=localStorage.getItem("educentral-user");e&&i(JSON.parse(e))}catch(e){console.error("Failed to parse user from localStorage",e),localStorage.removeItem("educentral-user")}finally{d(!1)}},[]);let u=(0,n.useCallback)(e=>{i(e),localStorage.setItem("educentral-user",JSON.stringify(e)),c.push("/dashboard")},[c]),m=(0,n.useCallback)(()=>{i(null),localStorage.removeItem("educentral-user"),c.push("/login")},[c]);return(0,a.jsx)(r.Provider,{value:{user:t,login:u,logout:m,isLoading:o},children:s})}},30285:(e,s,t)=>{"use strict";t.d(s,{$:()=>d,r:()=>o});var a=t(95155),n=t(12115),l=t(66634),r=t(74466),i=t(59434);let o=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,s)=>{let{className:t,variant:n,size:r,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:n,size:r,className:t})),ref:s,...c})});d.displayName="Button"},47906:(e,s,t)=>{"use strict";t.d(s,{a:()=>n});var a=t(12115);function n(){let[e,s]=a.useState(void 0);return a.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),t=()=>{s(window.innerWidth<768)};return e.addEventListener("change",t),s(window.innerWidth<768),()=>e.removeEventListener("change",t)},[]),!!e}},54165:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>m,Es:()=>h,L3:()=>x,c7:()=>f,lG:()=>o,rr:()=>p,zM:()=>d});var a=t(95155),n=t(12115),l=t(4033),r=t(25318),i=t(59434);let o=l.bL,d=l.l9,c=l.ZL;l.bm;let u=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.hJ,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n})});u.displayName=l.hJ.displayName;let m=n.forwardRef((e,s)=>{let{className:t,children:n,...o}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(l.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[n,(0,a.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(r.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.UC.displayName;let f=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};f.displayName="DialogHeader";let h=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};h.displayName="DialogFooter";let x=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...n})});x.displayName=l.hE.displayName;let p=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...n})});p.displayName=l.VY.displayName},59409:(e,s,t)=>{"use strict";t.d(s,{bq:()=>h,eb:()=>g,gC:()=>j,l6:()=>u,yv:()=>f});var a=t(95155),n=t(12115),l=t(11031),r=t(79556),i=t(77381),o=t(10518),d=t(59434),c=t(62523);let u=l.bL,m=l.YJ,f=l.WT,h=n.forwardRef((e,s)=>{let{className:t,children:n,...i}=e;return(0,a.jsxs)(l.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[n,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(r.A,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=l.l9.displayName;let x=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.PP,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let p=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.wn,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,a.jsx)(r.A,{className:"h-4 w-4"})})});p.displayName=l.wn.displayName;let j=n.forwardRef((e,s)=>{let{className:t,children:r,position:i="popper",...o}=e,[u,f]=n.useState(""),h=e=>n.Children.toArray(e).map(e=>{if(!n.isValidElement(e))return null;if(e.type===m){let s=h(e.props.children);return n.Children.count(s)>0?n.cloneElement(e,{},s):null}return e.type===g?j(e.props.children).toLowerCase().includes(u.toLowerCase())?e:null:e}).filter(Boolean),j=e=>{let s="";return n.Children.forEach(e,e=>{"string"==typeof e?s+=e:n.isValidElement(e)&&"children"in e.props&&(s+=j(e.props.children))}),s};return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...o,children:[(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(c.p,{placeholder:"Search...",value:u,onChange:e=>f(e.target.value),className:"w-full"})}),(0,a.jsx)(x,{}),(0,a.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:h(r)}),(0,a.jsx)(p,{})]})})});j.displayName=l.UC.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.JU,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...n})}).displayName=l.JU.displayName;let g=n.forwardRef((e,s)=>{let{className:t,children:n,...r}=e;return(0,a.jsxs)(l.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:n})]})});g.displayName=l.q7.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...n})}).displayName=l.wv.displayName},59434:(e,s,t)=>{"use strict";t.d(s,{cn:()=>l});var a=t(52596),n=t(39688);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.QP)((0,a.$)(s))}},59904:(e,s,t)=>{Promise.resolve().then(t.bind(t,93569))},62523:(e,s,t)=>{"use strict";t.d(s,{p:()=>r});var a=t(95155),n=t(12115),l=t(59434);let r=n.forwardRef((e,s)=>{let{className:t,type:n,...r}=e;return(0,a.jsx)("input",{type:n,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...r})});r.displayName="Input"},66695:(e,s,t)=>{"use strict";t.d(s,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>r,aR:()=>i,wL:()=>u});var a=t(95155),n=t(12115),l=t(59434);let r=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});r.displayName="Card";let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...n})});c.displayName="CardContent";let u=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...n})});u.displayName="CardFooter"},85057:(e,s,t)=>{"use strict";t.d(s,{Label:()=>d});var a=t(95155),n=t(12115),l=t(40968),r=t(74466),i=t(59434);let o=(0,r.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.b,{ref:s,className:(0,i.cn)(o(),t),...n})});d.displayName=l.b.displayName},87481:(e,s,t)=>{"use strict";t.d(s,{dj:()=>m});var a=t(12115);let n=0,l=new Map,r=e=>{if(l.has(e))return;let s=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,s)},i=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?r(t):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function u(e){let{...s}=e,t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=a.useState(d);return a.useEffect(()=>(o.push(s),()=>{let e=o.indexOf(s);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},93569:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>U});var a=t(95155),n=t(30285),l=t(66695),r=t(12115),i=t(37250),o=t(79556),d=t(59434);let c=i.bL,u=r.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(i.q7,{ref:s,className:(0,d.cn)("border-b",t),...n})});u.displayName="AccordionItem";let m=r.forwardRef((e,s)=>{let{className:t,children:n,...l}=e;return(0,a.jsx)(i.Y9,{className:"flex",children:(0,a.jsxs)(i.l9,{ref:s,className:(0,d.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...l,children:[n,(0,a.jsx)(o.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});m.displayName=i.l9.displayName;let f=r.forwardRef((e,s)=>{let{className:t,children:n,...l}=e;return(0,a.jsx)(i.UC,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,a.jsx)("div",{className:(0,d.cn)("pb-4 pt-0",t),children:n})})});f.displayName=i.UC.displayName;var h=t(34301),x=t(75943),p=t(77223),j=t(54165),g=t(17759),v=t(62523),b=t(59409),N=t(76981),y=t(10518);let w=r.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(N.bL,{ref:s,className:(0,d.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...n,children:(0,a.jsx)(N.C1,{className:(0,d.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(y.A,{className:"h-4 w-4"})})})});w.displayName=N.bL.displayName;var S=t(54059),I=t(70154);let C=r.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(S.bL,{className:(0,d.cn)("grid gap-2",t),...n,ref:s})});C.displayName=S.bL.displayName;let A=r.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(S.q7,{ref:s,className:(0,d.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:(0,a.jsx)(S.C1,{className:"flex items-center justify-center",children:(0,a.jsx)(I.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});A.displayName=S.q7.displayName;var R=t(62177),E=t(90221),T=t(55594),k=t(87481);let _=T.Ik({sectionOption:T.k5(["noSection","addSection"]),sectionPoolId:T.Yj().optional(),sectionName:T.Yj().optional(),licenses:T.au.number().min(1,"Licenses must be greater than 0")}).superRefine((e,s)=>{"addSection"!==e.sectionOption||e.sectionPoolId||e.sectionName||s.addIssue({code:T.eq.custom,message:"Either select an existing section or enter a new section name",path:["sectionPoolId"]})});function P(e){let{isOpen:s,onClose:t,onSave:l,availableLicenses:i,initialData:o,sectionsPool:d}=e,{toast:c}=(0,k.dj)(),[u,m]=(0,r.useState)(!1),f=!!o,h=(0,R.mN)({resolver:(0,E.u)(_),defaultValues:{sectionOption:f?"addSection":"noSection",sectionPoolId:(null==o?void 0:o.sectionPoolId)||"",sectionName:"",licenses:(null==o?void 0:o.licenses)||0}}),x=h.watch("sectionOption");return(0,r.useEffect)(()=>{h.reset({sectionOption:f?"addSection":"noSection",sectionPoolId:(null==o?void 0:o.sectionPoolId)||"",sectionName:"",licenses:(null==o?void 0:o.licenses)||0}),m(!1)},[s,o,h,f]),(0,a.jsx)(j.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(j.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(j.c7,{children:[(0,a.jsx)(j.L3,{children:o?"Edit Section Assignment":"Add Section to Class"}),(0,a.jsx)(j.rr,{children:o?"Update the license count for this section.":"Assign a section and licenses to this class."})]}),(0,a.jsx)(g.lV,{...h,children:(0,a.jsxs)("form",{onSubmit:h.handleSubmit(e=>{let s=e.licenses,a=i+(o?o.licenses:0);if(s>a)return void c({title:"Error",description:"You cannot assign more than the available licenses (".concat(a,")."),variant:"destructive"});let n={...e};"noSection"===e.sectionOption&&(n.sectionPoolId=void 0,n.sectionName="No Sections"),l(n),t()}),className:"space-y-4 py-4",children:[(0,a.jsx)(g.zB,{control:h.control,name:"sectionOption",render:e=>{let{field:s}=e;return(0,a.jsxs)(g.eI,{className:"space-y-3",children:[(0,a.jsx)(g.MJ,{children:(0,a.jsxs)(C,{onValueChange:s.onChange,defaultValue:s.value,className:"flex space-x-4",children:[(0,a.jsxs)(g.eI,{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.MJ,{children:(0,a.jsx)(A,{value:"noSection"})}),(0,a.jsx)(g.lR,{className:"font-normal",children:"No Sections"})]}),(0,a.jsxs)(g.eI,{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.MJ,{children:(0,a.jsx)(A,{value:"addSection"})}),(0,a.jsx)(g.lR,{className:"font-normal",children:"Add Section"})]})]})}),(0,a.jsx)(g.C5,{})]})}}),"addSection"===x&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)(w,{id:"new-section-checkbox",checked:u,onCheckedChange:e=>m(!!e)}),(0,a.jsx)("label",{htmlFor:"new-section-checkbox",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Create a new section"})]}),u?(0,a.jsx)(g.zB,{control:h.control,name:"sectionName",render:e=>{let{field:s}=e;return(0,a.jsxs)(g.eI,{children:[(0,a.jsx)(g.lR,{children:"New Section Name"}),(0,a.jsx)(g.MJ,{children:(0,a.jsx)(v.p,{placeholder:"e.g., Section D",...s})}),(0,a.jsx)(g.C5,{})]})}}):(0,a.jsx)(g.zB,{control:h.control,name:"sectionPoolId",render:e=>{let{field:s}=e;return(0,a.jsxs)(g.eI,{children:[(0,a.jsx)(g.lR,{children:"Select Section"}),(0,a.jsxs)(b.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,a.jsx)(g.MJ,{children:(0,a.jsx)(b.bq,{children:(0,a.jsx)(b.yv,{placeholder:"Select a section from the school pool"})})}),(0,a.jsx)(b.gC,{children:d.map(e=>(0,a.jsx)(b.eb,{value:e.id,children:e.name},e.id))})]}),(0,a.jsx)(g.C5,{})]})}})]}),(0,a.jsx)(g.zB,{control:h.control,name:"licenses",render:e=>{let{field:s}=e;return(0,a.jsxs)(g.eI,{children:[(0,a.jsx)(g.lR,{children:"Number of Licenses for this Class"}),(0,a.jsx)(g.MJ,{children:(0,a.jsx)(v.p,{type:"number",placeholder:"Max: ".concat(o?i+o.licenses:i),...s})}),(0,a.jsx)(g.C5,{})]})}}),(0,a.jsxs)(j.Es,{children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),"addSection"===x?(0,a.jsx)(n.$,{type:"submit",children:o?"Save Changes":"Add Section"}):(0,a.jsx)(n.$,{type:"submit",children:"Confirm"})]})]})})]})})}var O=t(26126),L=t(22100),M=t(47906);let D=[{id:"sch_1",schoolName:"Global International School",johnsonSchoolId:"JSN-123",licenceForStudent:100,totalStudents:0},{id:"sch_2",schoolName:"Oakridge International School",johnsonSchoolId:"JSN-124",licenceForStudent:600,totalStudents:550}],F=[{id:"t1",name:"Mr. John Doe",schoolId:"sch_1"},{id:"t2",name:"Ms. Jane Smith",schoolId:"sch_1"},{id:"t3",name:"Mrs. Emily White",schoolId:"sch_2"},{id:"t4",name:"Mr. Robert Brown",schoolId:"sch_2"}],z=[{id:"c1",name:"Class 10",schoolId:"sch_1"},{id:"c2",name:"Class 9",schoolId:"sch_1"},{id:"c3",name:"Class 8",schoolId:"sch_2"}],V=[{id:"sp1",name:"Section A",schoolId:"sch_1"},{id:"sp2",name:"Section B",schoolId:"sch_1"},{id:"sp3",name:"Section C",schoolId:"sch_1"},{id:"sp4",name:"Section Alpha",schoolId:"sch_2"}],J=[{id:"sa1",classId:"c1",sectionPoolId:"sp1",licenses:30,status:"active",classTeacherId:"t1"},{id:"sa2",classId:"c1",sectionPoolId:"sp2",licenses:25,status:"active",classTeacherId:"t2"},{id:"sa3",classId:"c2",sectionPoolId:"sp1",licenses:30,status:"inactive",classTeacherId:null}],q=[{id:"sub1",name:"Mathematics"},{id:"sub2",name:"Science"},{id:"sub3",name:"English"},{id:"sub4",name:"History"},{id:"sub5",name:"Geography"},{id:"sub6",name:"Social Studies"},{id:"sub7",name:"Physics"}],B=[{id:"ssta1",sectionAssignmentId:"sa1",subjectId:"sub1",teacherId:"t1"},{id:"ssta2",sectionAssignmentId:"sa1",subjectId:"sub2",teacherId:"t2"},{id:"ssta3",sectionAssignmentId:"sa2",subjectId:"sub1",teacherId:"t1"}];function U(){let{user:e}=(0,L.A)(),{toast:s}=(0,k.dj)(),t=(0,M.a)(),[i,o]=(0,r.useState)(D),[d,j]=(0,r.useState)(F),[g,v]=(0,r.useState)(z),[N,y]=(0,r.useState)(V),[w,S]=(0,r.useState)(J),[I,C]=(0,r.useState)(B),[A,R]=(0,r.useState)(null),[E,T]=(0,r.useState)(!1),[_,U]=(0,r.useState)(null),[$,G]=(0,r.useState)(null);(0,r.useEffect)(()=>{e&&i.length>0&&("School Admin"===e.role?R(i[0].id):"Super Admin"!==e.role||A||R(i[0].id))},[e,i]);let W=A?i.find(e=>e.id===A):null,Y=w.reduce((e,s)=>{let t=g.find(e=>e.id===s.classId);return t&&t.schoolId===A&&"active"===s.status?e+s.licenses:e},0),Z=W?W.licenceForStudent-Y:0,H=e=>{G(e),U(null),T(!0)},X=e=>{G(g.find(s=>s.id===e.classId)),U(e),T(!0)},Q=e=>{S(w.map(s=>s.id===e?{...s,status:"active"===s.status?"inactive":"active"}:s))},K=e=>{C([...I,{id:"ssta".concat(Date.now()),sectionAssignmentId:e,subjectId:q[0].id,teacherId:null}])},ee=(e,s)=>{C(I.map(t=>t.id===e?{...t,subjectId:s}:t))},es=(e,s)=>{C(I.map(t=>t.id===e?{...t,teacherId:s}:t))},et=e=>{C(I.filter(s=>s.id!==e))},ea=A?g.filter(e=>e.schoolId===A):[],en=A?N.filter(e=>e.schoolId===A):[],el=A?d.filter(e=>e.schoolId===A):[];return e?(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(l.ZB,{children:"Classes Management"}),(0,a.jsx)(l.BT,{children:"Super Admin"===e.role||"School Admin"===e.role?"Configure and manage Classes, Sections, Subjects and Teachers":"Managing classes for ".concat(null==W?void 0:W.schoolName)})]}),("Super Admin"===e.role||"School Admin"===e.role)&&(0,a.jsx)("div",{className:"w-full sm:w-auto",children:(0,a.jsxs)(b.l6,{onValueChange:R,value:A||void 0,children:[(0,a.jsx)(b.bq,{className:"w-full sm:w-[350px]",children:(0,a.jsx)(b.yv,{placeholder:"Select a school"})}),(0,a.jsx)(b.gC,{children:i.map(e=>(0,a.jsxs)(b.eb,{value:e.id,children:[e.johnsonSchoolId," - ",e.schoolName]},e.id))})]})})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)(l.Zp,{className:"border-none shadow-none pt-4",children:(0,a.jsx)(l.Wu,{className:"p-0",children:A?(0,a.jsx)(c,{type:"single",collapsible:!0,className:"w-full",children:ea.map(e=>(0,a.jsxs)(u,{value:e.id,children:[(0,a.jsx)(m,{children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between w-full items-start sm:items-center pr-4 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"font-semibold",children:["Class - ",e.name]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["(Total School Licenses: ",null==W?void 0:W.licenceForStudent," | Available: ",Z,")"]})]}),t?(0,a.jsx)(n.$,{variant:"outline",size:"icon",onClick:s=>{s.stopPropagation(),H(e)},className:"mt-2 sm:mt-0",children:(0,a.jsx)(h.A,{className:"h-4 w-4"})}):(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),H(e)},className:"mt-2 sm:mt-0",children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Add Section"]})]})}),(0,a.jsx)(f,{children:(0,a.jsx)("div",{className:"space-y-4 pt-2",children:w.filter(s=>s.classId===e.id).map(e=>{let s="NO_SECTION_ASSIGNED"===e.sectionPoolId,t=s?null:N.find(s=>s.id===e.sectionPoolId),l=I.filter(s=>s.sectionAssignmentId===e.id);return(0,a.jsxs)("div",{className:"py-2 px-4 rounded-md border",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[(0,a.jsx)("span",{className:"font-semibold",children:s?"No Sections":null==t?void 0:t.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-sm text-muted-foreground",children:"Class Teacher:"}),(0,a.jsxs)(b.l6,{value:e.classTeacherId||void 0,onValueChange:s=>{S(w.map(t=>t.id===e.id?{...t,classTeacherId:s}:t))},children:[(0,a.jsx)(b.bq,{className:"w-full sm:w-[250px]",children:(0,a.jsx)(b.yv,{placeholder:"Assign Class Teacher"})}),(0,a.jsx)(b.gC,{children:el.map(e=>(0,a.jsx)(b.eb,{value:e.id,children:e.name},e.id))})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Licenses: ",e.licenses]}),(0,a.jsx)(O.E,{variant:"active"===e.status?"default":"secondary",children:e.status}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>X(e),children:(0,a.jsx)(x.A,{className:"h-4 w-4"})}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>Q(e.id),children:(0,a.jsx)(p.A,{className:"h-4 w-4 ".concat("inactive"===e.status?"text-green-500":"text-destructive")})})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-sm mb-2",children:"Subjects & Teachers"}),(0,a.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[(0,a.jsxs)(b.l6,{value:e.subjectId,onValueChange:s=>ee(e.id,s),children:[(0,a.jsx)(b.bq,{className:"w-full sm:w-[200px]",children:(0,a.jsx)(b.yv,{placeholder:"Select Subject"})}),(0,a.jsx)(b.gC,{children:q.map(e=>(0,a.jsx)(b.eb,{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)(b.l6,{value:e.teacherId||void 0,onValueChange:s=>es(e.id,s),children:[(0,a.jsx)(b.bq,{className:"w-full sm:w-[250px]",children:(0,a.jsx)(b.yv,{placeholder:"Assign Subject Teacher"})}),(0,a.jsx)(b.gC,{children:el.map(e=>(0,a.jsx)(b.eb,{value:e.id,children:e.name},e.id))})]}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>et(e.id),children:(0,a.jsx)(p.A,{className:"h-4 w-4 text-destructive"})})]},e.id))}),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>K(e.id),children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"})," Add Subject"]})]})]},e.id)})})})]},e.id))}):(0,a.jsx)("div",{className:"text-center text-muted-foreground mt-8",children:"Super Admin"!==e.role||A?"Loading school data...":"Please select a school to see the classes."})})}),(0,a.jsx)(P,{isOpen:E,onClose:()=>T(!1),onSave:e=>{if(A&&$)if("noSection"===e.sectionOption)_?S(w.map(s=>s.id===_.id?{...s,sectionPoolId:"NO_SECTION_ASSIGNED",licenses:e.licenses}:s)):S([...w,{id:"sa".concat(Date.now()),classId:$.id,sectionPoolId:"NO_SECTION_ASSIGNED",licenses:e.licenses,status:"active",classTeacherId:null}]);else{let s=e.sectionPoolId;if(e.sectionName){let t={id:"sp".concat(Date.now()),name:e.sectionName,schoolId:A};y([...N,t]),s=t.id}if(!s)return;_?S(w.map(t=>t.id===_.id?{...t,sectionPoolId:s,licenses:e.licenses}:t)):S([...w,{id:"sa".concat(Date.now()),classId:$.id,sectionPoolId:s,licenses:e.licenses,status:"active",classTeacherId:null}])}},availableLicenses:Z,initialData:_,sectionsPool:en},"add-section-".concat((null==_?void 0:_.id)||(null==$?void 0:$.id)))]})]}):(0,a.jsx)("div",{children:"Loading..."})}}},e=>{var s=s=>e(e.s=s);e.O(0,[4277,9456,8539,1072,8636,1342,7094,5405,8441,1684,7358],()=>s(59904)),_N_E=e.O()}]);