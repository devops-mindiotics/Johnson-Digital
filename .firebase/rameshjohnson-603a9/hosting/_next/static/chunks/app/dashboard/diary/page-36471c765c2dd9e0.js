(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5245],{14636:(e,t,s)=>{"use strict";s.d(t,{AM:()=>d,Wv:()=>i,hl:()=>o});var a=s(95155),r=s(12115),l=s(98176),n=s(59434);let d=l.bL,i=l.l9,o=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:d=4,...i}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{ref:t,align:r,sideOffset:d,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})})});o.displayName=l.UC.displayName},17759:(e,t,s)=>{"use strict";s.d(t,{C5:()=>g,MJ:()=>h,eI:()=>f,lR:()=>p,lV:()=>o,zB:()=>m});var a=s(95155),r=s(12115),l=s(66634),n=s(62177),d=s(59434),i=s(85057);let o=n.Op,c=r.createContext({}),m=e=>{let{...t}=e;return(0,a.jsx)(c.Provider,{value:{name:t.name},children:(0,a.jsx)(n.xI,{...t})})},u=()=>{let e=r.useContext(c),t=r.useContext(x),{getFieldState:s,formState:a}=(0,n.xW)(),l=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:d}=t;return{id:d,name:e.name,formItemId:"".concat(d,"-form-item"),formDescriptionId:"".concat(d,"-form-item-description"),formMessageId:"".concat(d,"-form-item-message"),...l}},x=r.createContext({}),f=r.forwardRef((e,t)=>{let{className:s,...l}=e,n=r.useId();return(0,a.jsx)(x.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:t,className:(0,d.cn)("space-y-2",s),...l})})});f.displayName="FormItem";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e,{error:l,formItemId:n}=u();return(0,a.jsx)(i.Label,{ref:t,className:(0,d.cn)(l&&"text-destructive",s),htmlFor:n,...r})});p.displayName="FormLabel";let h=r.forwardRef((e,t)=>{let{...s}=e,{error:r,formItemId:n,formDescriptionId:d,formMessageId:i}=u();return(0,a.jsx)(l.DX,{ref:t,id:n,"aria-describedby":r?"".concat(d," ").concat(i):"".concat(d),"aria-invalid":!!r,...s})});h.displayName="FormControl",r.forwardRef((e,t)=>{let{className:s,...r}=e,{formDescriptionId:l}=u();return(0,a.jsx)("p",{ref:t,id:l,className:(0,d.cn)("text-sm text-muted-foreground",s),...r})}).displayName="FormDescription";let g=r.forwardRef((e,t)=>{var s;let{className:r,children:l,...n}=e,{error:i,formMessageId:o}=u(),c=i?String(null!=(s=null==i?void 0:i.message)?s:""):l;return c?(0,a.jsx)("p",{ref:t,id:o,className:(0,d.cn)("text-sm font-medium text-destructive",r),...n,children:c}):null});g.displayName="FormMessage"},30285:(e,t,s)=>{"use strict";s.d(t,{$:()=>o,r:()=>i});var a=s(95155),r=s(12115),l=s(66634),n=s(74466),d=s(59434);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:o=!1,...c}=e,m=o?l.DX:"button";return(0,a.jsx)(m,{className:(0,d.cn)(i({variant:r,size:n,className:s})),ref:t,...c})});o.displayName="Button"},54165:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>u,Es:()=>f,L3:()=>p,c7:()=>x,lG:()=>i,rr:()=>h,zM:()=>o});var a=s(95155),r=s(12115),l=s(4033),n=s(25318),d=s(59434);let i=l.bL,o=l.l9,c=l.ZL;l.bm;let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.hJ,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});m.displayName=l.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(l.UC,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...i,children:[r,(0,a.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=l.UC.displayName;let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};x.displayName="DialogHeader";let f=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};f.displayName="DialogFooter";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.hE,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});p.displayName=l.hE.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.VY,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",s),...r})});h.displayName=l.VY.displayName},59409:(e,t,s)=>{"use strict";s.d(t,{bq:()=>f,eb:()=>j,gC:()=>g,l6:()=>m,yv:()=>x});var a=s(95155),r=s(12115),l=s(11031),n=s(79556),d=s(77381),i=s(10518),o=s(59434),c=s(62523);let m=l.bL,u=l.YJ,x=l.WT,f=r.forwardRef((e,t)=>{let{className:s,children:r,...d}=e;return(0,a.jsxs)(l.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...d,children:[r,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=l.l9.displayName;let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})});p.displayName=l.PP.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});h.displayName=l.wn.displayName;let g=r.forwardRef((e,t)=>{let{className:s,children:n,position:d="popper",...i}=e,[m,x]=r.useState(""),f=e=>r.Children.toArray(e).map(e=>{if(!r.isValidElement(e))return null;if(e.type===u){let t=f(e.props.children);return r.Children.count(t)>0?r.cloneElement(e,{},t):null}return e.type===j?g(e.props.children).toLowerCase().includes(m.toLowerCase())?e:null:e}).filter(Boolean),g=e=>{let t="";return r.Children.forEach(e,e=>{"string"==typeof e?t+=e:r.isValidElement(e)&&"children"in e.props&&(t+=g(e.props.children))}),t};return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===d&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:d,...i,children:[(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(c.p,{placeholder:"Search...",value:m,onChange:e=>x(e.target.value),className:"w-full"})}),(0,a.jsx)(p,{}),(0,a.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===d&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:f(n)}),(0,a.jsx)(h,{})]})})});g.displayName=l.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=l.JU.displayName;let j=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(l.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:r})]})});j.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=l.wv.displayName},59434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(52596),r=s(39688);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},62523:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var a=s(95155),r=s(12115),l=s(59434);let n=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});n.displayName="Input"},66695:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>d,wL:()=>m});var a=s(95155),r=s(12115),l=s(59434);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});n.displayName="Card";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});d.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});i.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent";let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})});m.displayName="CardFooter"},67619:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>O});var a=s(95155),r=s(12115),l=s(62177),n=s(90221),d=s(55594),i=s(30285),o=s(66695),c=s(83013),m=s(51920),u=s(59434),x=s(965),f=s(73158),p=s(43900);function h(e){let{className:t,classNames:s,showOutsideDays:r=!0,...l}=e;return(0,a.jsx)(p.hv,{showOutsideDays:r,className:(0,u.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,u.cn)((0,i.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,u.cn)((0,i.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:e=>{let{className:t,...s}=e;return(0,a.jsx)(x.A,{className:(0,u.cn)("h-4 w-4",t),...s})},IconRight:e=>{let{className:t,...s}=e;return(0,a.jsx)(f.A,{className:(0,u.cn)("h-4 w-4",t),...s})}},...l})}h.displayName="Calendar";var g=s(14636);function j(e){let{value:t,onChange:s,placeholder:l}=e,[n,d]=r.useState(t?new Date(t):void 0);return(0,a.jsxs)(g.AM,{children:[(0,a.jsx)(g.Wv,{asChild:!0,children:(0,a.jsxs)(i.$,{variant:"outline",className:(0,u.cn)("w-full justify-start text-left font-normal",!n&&"text-muted-foreground"),children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),n?(0,c.GP)(n,"PPP"):(0,a.jsx)("span",{children:l})]})}),(0,a.jsx)(g.hl,{className:"w-auto p-0",children:(0,a.jsx)(h,{mode:"single",selected:n,onSelect:e=>{d(e),s(e?(0,c.GP)(e,"yyyy-MM-dd"):void 0)},initialFocus:!0})})]})}var y=s(59409),b=s(31550),v=s(18046),N=s(18763),w=s(77223),C=s(75066),I=s(21887),R=s(10518);let S=JSON.parse('[{"id":"diary-1","title":"Math Homework - Algebra","description":"Complete exercise 5.2 from NCERT Algebra.","date":"2024-07-28","actionCompletionDate":"2024-07-30","classId":"10","sectionId":"A","assignedTo":"student","studentIds":["Rohan Sharma"],"attachments":[{"fileName":"algebra_homework.pdf","fileUrl":"https://cdn.school.com/uploads/homework/algebra.pdf"}],"createdBy":"teacher_456","userType":"Teacher"},{"id":"diary-2","title":"Essay Writing Practice","description":"The entire class needs to work on their essay writing skills. I will be giving a special class on this tomorrow.","date":"2024-07-28","actionCompletionDate":"2024-07-29","classId":"10","sectionId":"A","assignedTo":"all","studentIds":[],"attachments":[],"createdBy":"teacher_456","userType":"Teacher"},{"id":"diary-3","title":"Science Test Performance","description":"Priya has shown great improvement in the recent class test. Her understanding of cellular biology is commendable.","date":"2024-07-27","actionCompletionDate":"2024-07-27","classId":"9","sectionId":"B","assignedTo":"student","studentIds":["Priya Singh"],"attachments":[],"createdBy":"teacher_123","userType":"Teacher"},{"id":"diary-4","title":"History Project Reminder","description":"Reminder: History project submission is on August 5th. All students must submit their projects on time.","date":"2024-07-29","actionCompletionDate":"2024-08-05","classId":"9","sectionId":"B","assignedTo":"all","studentIds":[],"attachments":[],"createdBy":"teacher_123","userType":"Teacher"}]');var _=s(54165),k=s(62523),A=s(88539),B=s(17759),D=s(77740),T=s(75074);let z=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(D.uB,{ref:t,className:(0,u.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...r})});z.displayName=D.uB.displayName;let E=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,a.jsx)(T.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,a.jsx)(D.uB.Input,{ref:t,className:(0,u.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...r})]})});E.displayName=D.uB.Input.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(D.uB.List,{ref:t,className:(0,u.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...r})}).displayName=D.uB.List.displayName;let M=r.forwardRef((e,t)=>(0,a.jsx)(D.uB.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));M.displayName=D.uB.Empty.displayName;let L=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(D.uB.Group,{ref:t,className:(0,u.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...r})});L.displayName=D.uB.Group.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(D.uB.Separator,{ref:t,className:(0,u.cn)("-mx-1 h-px bg-border",s),...r})}).displayName=D.uB.Separator.displayName;let P=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(D.uB.Item,{ref:t,className:(0,u.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s),...r})});P.displayName=D.uB.Item.displayName;let F=[{id:"student_101",name:"Alice Johnson"},{id:"student_102",name:"Bob Williams"},{id:"student_103",name:"Charlie Brown"},{id:"student_104",name:"David Miller"},{id:"student_105",name:"Eve Davis"}],J=d.Ik({title:d.Yj().min(1,"Title is required."),description:d.Yj().min(1,"Description is required"),date:d.Yj().min(1,"Date is required"),actionCompletionDate:d.Yj().min(1,"Completion date is required"),classId:d.Yj().min(1,"Please select a class."),sectionId:d.Yj().min(1,"Please select a section."),assignedTo:d.Yj(),studentIds:d.YO(d.Yj()).optional(),attachments:d.bz().refine(e=>void 0===e||"undefined"!=typeof FileList&&e instanceof FileList,"Invalid file selection").optional()}),V=e=>{let{onSubmit:t,initialData:s,onClose:d,classSectionMap:o}=e,c={title:"",description:"",date:new Date().toISOString().split("T")[0],actionCompletionDate:new Date().toISOString().split("T")[0],classId:"",sectionId:"",assignedTo:"all",studentIds:[],attachments:void 0},m=(0,l.mN)({resolver:(0,n.u)(J),defaultValues:s?{...s,attachments:void 0}:c}),x=m.watch("classId"),f=x&&o[x]||[];return(0,r.useEffect)(()=>{s?m.reset({...s,attachments:void 0}):m.reset(c)},[s,m]),(0,r.useEffect)(()=>{f.includes(m.getValues("sectionId"))||m.setValue("sectionId","")},[x,f,m]),(0,a.jsx)(B.lV,{...m,children:(0,a.jsxs)("form",{onSubmit:m.handleSubmit(t),className:"space-y-4",children:[(0,a.jsx)(B.zB,{control:m.control,name:"title",render:e=>{let{field:t}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsx)(B.lR,{children:"Title"}),(0,a.jsx)(B.MJ,{children:(0,a.jsx)(k.p,{placeholder:"e.g., Math Homework - Algebra",...t})}),(0,a.jsx)(B.C5,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsx)(B.zB,{control:m.control,name:"classId",render:e=>{let{field:t}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsx)(B.lR,{children:"Class"}),(0,a.jsxs)(y.l6,{onValueChange:t.onChange,value:t.value,children:[(0,a.jsx)(B.MJ,{children:(0,a.jsx)(y.bq,{children:(0,a.jsx)(y.yv,{placeholder:"Select a class"})})}),(0,a.jsx)(y.gC,{children:Object.keys(o).map(e=>(0,a.jsxs)(y.eb,{value:e,children:["Class ",e]},e))})]}),(0,a.jsx)(B.C5,{})]})}}),(0,a.jsx)(B.zB,{control:m.control,name:"sectionId",render:e=>{let{field:t}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsx)(B.lR,{children:"Section"}),(0,a.jsxs)(y.l6,{onValueChange:t.onChange,value:t.value,disabled:!x||0===f.length,children:[(0,a.jsx)(B.MJ,{children:(0,a.jsx)(y.bq,{children:(0,a.jsx)(y.yv,{placeholder:"Select a section"})})}),(0,a.jsx)(y.gC,{children:f.map(e=>(0,a.jsxs)(y.eb,{value:e,children:["Section ",e]},e))})]}),(0,a.jsx)(B.C5,{})]})}})]}),(0,a.jsx)(B.zB,{control:m.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsx)(B.lR,{children:"Description"}),(0,a.jsx)(B.MJ,{children:(0,a.jsx)(A.T,{placeholder:"Provide a detailed description for the diary entry.",...t})}),(0,a.jsx)(B.C5,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsx)(B.zB,{control:m.control,name:"date",render:e=>{let{field:t}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsx)(B.lR,{children:"Date"}),(0,a.jsx)(B.MJ,{children:(0,a.jsx)(k.p,{type:"date",...t})}),(0,a.jsx)(B.C5,{})]})}}),(0,a.jsx)(B.zB,{control:m.control,name:"actionCompletionDate",render:e=>{let{field:t}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsx)(B.lR,{children:"Completion Date"}),(0,a.jsx)(B.MJ,{children:(0,a.jsx)(k.p,{type:"date",...t})}),(0,a.jsx)(B.C5,{})]})}})]}),(0,a.jsx)(B.zB,{control:m.control,name:"assignedTo",render:e=>{let{field:t}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsx)(B.lR,{children:"Assign To"}),(0,a.jsxs)(y.l6,{onValueChange:t.onChange,value:t.value,children:[(0,a.jsx)(B.MJ,{children:(0,a.jsx)(y.bq,{children:(0,a.jsx)(y.yv,{placeholder:"Assign to..."})})}),(0,a.jsxs)(y.gC,{children:[(0,a.jsx)(y.eb,{value:"all",children:"All Students in Section"}),(0,a.jsx)(y.eb,{value:"student",children:"Specific Students"})]})]}),(0,a.jsx)(B.C5,{})]})}}),"student"===m.watch("assignedTo")&&(0,a.jsx)(B.zB,{control:m.control,name:"studentIds",render:e=>{var t,s;let{field:r}=e;return(0,a.jsxs)(B.eI,{className:"flex flex-col",children:[(0,a.jsx)(B.lR,{children:"Students"}),(0,a.jsxs)(g.AM,{children:[(0,a.jsx)(g.Wv,{asChild:!0,children:(0,a.jsx)(B.MJ,{children:(0,a.jsxs)(i.$,{variant:"outline",role:"combobox",className:(0,u.cn)("w-full justify-between",!(null==(t=r.value)?void 0:t.length)&&"text-muted-foreground"),children:[(null==(s=r.value)?void 0:s.length)?"".concat(r.value.length," student(s) selected"):"Select students",(0,a.jsx)(I.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),(0,a.jsx)(g.hl,{className:"w-full p-0",children:(0,a.jsxs)(z,{children:[(0,a.jsx)(E,{placeholder:"Search students..."}),(0,a.jsx)(M,{children:"No students found."}),(0,a.jsx)(L,{children:F.map(e=>(0,a.jsxs)(P,{value:e.id,onSelect:()=>{let t=r.value||[],s=t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id];m.setValue("studentIds",s)},children:[(0,a.jsx)(R.A,{className:(0,u.cn)("mr-2 h-4 w-4",(r.value||[]).includes(e.id)?"opacity-100":"opacity-0")}),e.name]},e.id))})]})})]}),(0,a.jsx)(B.C5,{})]})}}),(0,a.jsx)(B.zB,{control:m.control,name:"attachments",render:e=>{let{field:t}=e;return(0,a.jsxs)(B.eI,{children:[(0,a.jsx)(B.lR,{children:"Attachment"}),(0,a.jsx)(B.MJ,{children:(0,a.jsx)(k.p,{type:"file",multiple:!0,onChange:e=>t.onChange(e.target.files)})}),(0,a.jsx)(B.C5,{})]})}}),(0,a.jsxs)(_.Es,{children:[(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:d,children:"Cancel"}),(0,a.jsx)(i.$,{type:"submit",children:s?"Save Changes":"Create Entry"})]})]})})},O=()=>{let[e,t]=(0,r.useState)(S),[s,l]=(0,r.useState)(e),[n,d]=(0,r.useState)("all"),[c,m]=(0,r.useState)("all"),[u,x]=(0,r.useState)(),[f,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)(null),I=(0,r.useMemo)(()=>{let e={};return S.forEach(t=>{t.classId&&t.sectionId&&(e[t.classId]||(e[t.classId]=new Set),e[t.classId].add(t.sectionId))}),Object.keys(e).forEach(t=>{e[t]=Array.from(e[t]).sort()}),e},[]),R=Object.keys(I).sort(),k="all"!==n&&I[n]||[];(0,r.useEffect)(()=>{let t=e;if(n&&"all"!==n&&(t=t.filter(e=>e.classId===n),c&&"all"!==c&&(t=t.filter(e=>e.sectionId===c))),u){let e=new Date(u).toISOString().split("T")[0];t=t.filter(t=>t.date===e)}l(t)},[e,n,c,u]);let A=s=>{t(e.filter(e=>e.id!==s))},B=e=>{g(e),p(!0)};return(0,a.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:(0,a.jsxs)(o.Zp,{className:"shadow-lg",children:[(0,a.jsxs)(o.aR,{className:"flex-row items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.ZB,{children:"Diary Entries"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage and view all diary entries."})]}),(0,a.jsxs)(_.lG,{open:f,onOpenChange:p,children:[(0,a.jsx)(_.zM,{asChild:!0,children:(0,a.jsxs)("div",{children:[(0,a.jsxs)(i.$,{onClick:()=>g(null),className:"hidden md:inline-flex bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Add Diary"]}),(0,a.jsxs)(i.$,{onClick:()=>g(null),size:"icon",className:"md:hidden bg-gradient-to-r from-blue-500 to-purple-500 text-white relative",children:[(0,a.jsx)(b.A,{className:"h-5 w-5"}),(0,a.jsx)("div",{className:"absolute top-[-4px] right-[-4px] bg-green-500 rounded-full p-0.5",children:(0,a.jsx)(v.A,{className:"h-3 w-3 text-white"})})]})]})}),(0,a.jsxs)(_.Cf,{className:"w-[95vw] max-w-2xl p-4 sm:p-6 max-h-[90vh] overflow-y-auto rounded-md",children:[(0,a.jsxs)(_.c7,{children:[(0,a.jsxs)(_.L3,{className:"text-2xl",children:[h?"Edit":"Add"," Diary Entry"]}),(0,a.jsxs)(_.rr,{children:["Fill in the details below to ",h?"update the":"create a new"," diary entry."]})]}),(0,a.jsx)(V,{onSubmit:s=>{let{attachments:a,...r}=s,l={...r,studentIds:s.studentIds||[],attachments:a&&a.length>0?Array.from(a).map(e=>({fileName:e.name,fileUrl:URL.createObjectURL(e)})):(null==h?void 0:h.attachments)||[]};if(h)t(e.map(e=>e.id===h.id?{...e,...l,id:e.id,createdBy:e.createdBy,userType:e.userType}:e));else{let e={id:"diary-".concat(Date.now()),...l,createdBy:"teacher_456",userType:"Teacher"};t(t=>[e,...t])}p(!1),g(null)},initialData:h,onClose:()=>p(!1),classSectionMap:I})]})]})]}),(0,a.jsxs)(o.Wu,{children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-2 mb-4",children:[(0,a.jsxs)(y.l6,{onValueChange:e=>{d(e),m("all")},value:n,children:[(0,a.jsx)(y.bq,{className:"w-full sm:w-[180px]",children:(0,a.jsx)(y.yv,{placeholder:"Select Class"})}),(0,a.jsxs)(y.gC,{children:[(0,a.jsx)(y.eb,{value:"all",children:"All Classes"}),R.map(e=>(0,a.jsxs)(y.eb,{value:e,children:["Class ",e]},e))]})]}),(0,a.jsxs)(y.l6,{onValueChange:m,value:c,disabled:"all"===n||0===k.length,children:[(0,a.jsx)(y.bq,{className:"w-full sm:w-[180px]",children:(0,a.jsx)(y.yv,{placeholder:"Select Section"})}),(0,a.jsxs)(y.gC,{children:[(0,a.jsx)(y.eb,{value:"all",children:"All Sections"}),k.map(e=>(0,a.jsxs)(y.eb,{value:e,children:["Section ",e]},e))]})]}),(0,a.jsx)(j,{onSelect:x,className:"w-full sm:w-auto"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:s.map(e=>(0,a.jsxs)(o.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsxs)(o.aR,{className:"flex flex-row justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.ZB,{className:"text-lg font-semibold",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Class ",e.classId," - Section ",e.sectionId]})]}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>B(e),children:(0,a.jsx)(N.A,{className:"h-4 w-4"})}),(0,a.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>A(e.id),children:(0,a.jsx)(w.A,{className:"h-4 w-4 text-red-500"})})]})]}),(0,a.jsxs)(o.Wu,{children:[(0,a.jsx)("p",{className:"text-sm text-gray-700 mb-3",children:e.description}),"student"===e.assignedTo&&e.studentIds.length>0&&(0,a.jsxs)("p",{className:"text-xs font-semibold mt-2 bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:["Assigned to: ",e.studentIds.length," student(s)"]}),e.attachments&&e.attachments.length>0&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("h4",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Attachments:"}),e.attachments.map((e,t)=>(0,a.jsxs)("a",{href:e.fileUrl,target:"_blank",rel:"noreferrer",className:"flex items-center text-sm text-blue-600 hover:underline",children:[(0,a.jsx)(C.A,{className:"h-3 w-3 mr-1.5"}),e.fileName]},t))]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-3 pt-2 border-t space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("b",{children:"Date:"})," ",new Date(e.date).toLocaleDateString()]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("b",{children:"Completion:"})," ",new Date(e.actionCompletionDate).toLocaleDateString()]})]})]})]},e.id))})]})]})})}},85057:(e,t,s)=>{"use strict";s.d(t,{Label:()=>o});var a=s(95155),r=s(12115),l=s(40968),n=s(74466),d=s(59434);let i=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.b,{ref:t,className:(0,d.cn)(i(),s),...r})});o.displayName=l.b.displayName},88539:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var a=s(95155),r=s(12115),l=s(59434);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});n.displayName="Textarea"},98151:(e,t,s)=>{Promise.resolve().then(s.bind(s,67619))}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,9456,8539,1072,8636,1342,7094,936,8441,1684,7358],()=>t(98151)),_N_E=e.O()}]);